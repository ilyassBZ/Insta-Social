{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Documents/DI/websites/instasocial/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/hp/Documents/DI/websites/instasocial/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/hp/Documents/DI/websites/instasocial/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Documents/DI/websites/instasocial/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{formatMs}from\"@material-ui/core\";import React,{useEffect,useState}from\"react\";import useStyles from\"./styles\";import{TextField,Button,Typography,Paper}from\"@material-ui/core\";import FileBase from\"react-file-base64\";import{useDispatch,useSelector}from\"react-redux\";import{createPost,updatePost}from\"../../actions/posts\";import{userInfo}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(_ref){var _user$result2;var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({title:\"\",message:\"\",tags:\"\",selectedFile:\"\"}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var classes=useStyles();var dispatch=useDispatch();var post=useSelector(function(state){return currentId?state.posts.find(function(message){return message._id===currentId;}):null;});var user=JSON.parse(localStorage.getItem('profile'));useEffect(function(){if(post)setPostData(post);},[post]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _user$result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(currentId){dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));}else{dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user})));}case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var clear=function clear(){setCurrentId(null);setPostData({title:'',message:'',tags:'',selectedFile:''});};if(!(user!==null&&user!==void 0&&(_user$result2=user.result)!==null&&_user$result2!==void 0&&_user$result2.name)){return/*#__PURE__*/_jsx(Paper,{className:\"classes.paper\",children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"Please Sign In to creat your own Post and like other's posts.\"})});}return/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Creating a Post\"}),/*#__PURE__*/_jsx(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,value:postData.title,required:true,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,multiline:true,rows:4,value:postData.message,required:true,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags\",fullWidth:true,value:postData.tags,require:true,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(',')}));}}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,required:true,onDone:function onDone(_ref3){var base64=_ref3.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true,children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true,children:\"Clear\"})]})});};export default Form;","map":{"version":3,"names":["formatMs","React","useEffect","useState","useStyles","TextField","Button","Typography","Paper","FileBase","useDispatch","useSelector","createPost","updatePost","userInfo","Form","currentId","setCurrentId","title","message","tags","selectedFile","postData","setPostData","classes","dispatch","post","state","posts","find","_id","user","JSON","parse","localStorage","getItem","handleSubmit","e","preventDefault","name","result","clear","paper","root","form","target","value","split","fileInput","base64","buttonSubmit"],"sources":["C:/Users/hp/Documents/DI/websites/instasocial/client/src/components/Form/Form.js"],"sourcesContent":["import { formatMs } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport useStyles from \"./styles\";\r\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\r\nimport FileBase from \"react-file-base64\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { createPost , updatePost} from \"../../actions/posts\";\r\nimport { userInfo } from \"react-redux\";\r\n\r\nconst Form = ({ currentId, setCurrentId }) => {\r\n  \r\n  const [postData, setPostData] = useState({\r\n    title: \"\",\r\n    message: \"\",\r\n    tags: \"\",\r\n    selectedFile: \"\",\r\n  });\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const post = useSelector((state) => (currentId ? state.posts.find((message) => message._id === currentId) : null));\r\n  const user = JSON.parse(localStorage.getItem('profile'))\r\n  useEffect(() => {\r\n    if (post) setPostData(post);\r\n  }, [post]); \r\n\r\n  \r\n  \r\n  const handleSubmit = async(e) => {\r\n    e.preventDefault();\r\n    \r\n    if (currentId) {\r\n      dispatch(updatePost(currentId, {...postData, name: user?.result?.name}));\r\n      \r\n    } else {\r\n      \r\n      dispatch(createPost({...postData,name:user}));\r\n      \r\n    }\r\n  };\r\n  const clear = () => {\r\n    setCurrentId(null)\r\n    setPostData({title:'',message:'',tags:'',selectedFile:''})\r\n  };\r\n\r\n  if(!user?.result?.name){\r\n    return(\r\n      <Paper className=\"classes.paper\">\r\n        <Typography variant=\"h6\" align=\"center\">\r\n          Please Sign In to creat your own Post and like other's posts.\r\n          </Typography>\r\n      </Paper>\r\n    )\r\n  }\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <form\r\n        autoComplete='off'\r\n        noValidate\r\n        className={`${classes.root} ${classes.form}`}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <Typography variant='h6'>Creating a Post</Typography>\r\n        \r\n        <TextField\r\n          name='title'\r\n          variant='outlined'\r\n          label='Title'\r\n          fullWidth\r\n          value={postData.title}\r\n          required\r\n          onChange={(e) => setPostData({ ...postData, title: e.target.value })}\r\n        />\r\n        <TextField\r\n          name='message'\r\n          variant='outlined'\r\n          label='Message'\r\n          fullWidth\r\n          multiline rows={4} \r\n          value={postData.message}\r\n          required\r\n          onChange={(e) =>\r\n            setPostData({ ...postData, message: e.target.value })\r\n          }\r\n        />\r\n        <TextField\r\n          name='tags'\r\n          variant='outlined'\r\n          label='Tags'\r\n          fullWidth\r\n          value={postData.tags}\r\n          require\r\n          onChange={(e) => setPostData({ ...postData, tags: e.target.value.split(',') })}\r\n        />\r\n        <div className={classes.fileInput}>\r\n          <FileBase\r\n            type='file'\r\n            multiple={false}\r\n            required\r\n            onDone={({ base64 }) =>\r\n              setPostData({ ...postData, selectedFile: base64 })\r\n            }\r\n          />\r\n        </div>\r\n        <Button\r\n          className={classes.buttonSubmit}\r\n          variant='contained'\r\n          color='primary'\r\n          size='large'\r\n          type='submit'\r\n          fullWidth\r\n        >\r\n          Submit\r\n        </Button>\r\n        <Button\r\n          className={classes.buttonSubmit}\r\n          variant='contained'\r\n          color='secondary'\r\n          size='small'\r\n          onClick={clear}\r\n          fullWidth\r\n        >\r\n          Clear\r\n        </Button>\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}