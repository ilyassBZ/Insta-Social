{"ast":null,"code":"import _slicedToArray from\"C:/Users/hp/Documents/DI/websites/instasocial/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{AppBar,Avatar,Button,Toolbar,Typography}from'@material-ui/core';import useStyles from'./styles';import{useDispatch}from'react-redux';import decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useNavigate();var location=useLocation();var logout=function logout(){dispatch({type:'LOGOUT'});history('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(\"div\",{className:classes.brandContainer,children:/*#__PURE__*/_jsx(Typography,{className:classes.heading,component:Link,to:\"/\",variant:\"h2\",align:\"center\",children:\"InstSocial\"})}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,children:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"container\",className:classes.logout,onClick:logout,color:\"secondary\",children:\"LogOut\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","AppBar","Avatar","Button","Toolbar","Typography","useStyles","useDispatch","decode","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","toolbar","profile","purple","result","name","charAt","userName"],"sources":["C:/Users/hp/Documents/DI/websites/instasocial/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState ,useEffect} from 'react'\r\nimport {Link,useNavigate,useLocation} from 'react-router-dom' \r\nimport { AppBar, Avatar, Button, Toolbar, Typography } from '@material-ui/core'\r\nimport useStyles from './styles'\r\nimport {useDispatch} from 'react-redux'\r\nimport  decode from 'jwt-decode'\r\nexport const Navbar = () => {\r\n\tconst classes = useStyles()\r\n\tconst [user,setUser]=useState(JSON.parse(localStorage.getItem('profile')))\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useNavigate()\r\n\tconst location = useLocation()\r\n\tconst logout =()=>{\r\n\t\tdispatch({type:'LOGOUT'})\r\n\t\thistory('/auth')\r\n\t\tsetUser(null)\r\n\t}\r\n\tuseEffect(() =>{\r\n\t\tconst token = user?.token\r\n\r\n\t\tif(token){\r\n\r\n\t\t\tconst decodedToken= decode(token)\r\n\t\t\tif(decodedToken.exp *1000 <new Date().getTime()) logout()\r\n\t\t}\r\n\r\n\t\tsetUser(JSON.parse(localStorage.getItem('profile')))\r\n\t},[location])\r\n\treturn (\r\n\t\t<AppBar className={classes.appBar} position='static' color='inherit'>\r\n\t\t\t<div className={classes.brandContainer}>\r\n        <Typography className={classes.heading}  component={Link} to=\"/\" variant='h2' align='center'>\r\n          InstSocial\r\n        </Typography>\r\n\t\t\t</div>\r\n\t\t\t<Toolbar className={classes.toolbar}>\r\n\t\t{\r\n\t\t\tuser ?(\r\n\t\t\t\t<div className={classes.profile}>\r\n\t\t\t\t\t<Avatar className={classes.purple} alt={user.result.name}>{user.result.name.charAt(0)}</Avatar>\r\n\t\t\t\t\t<Typography className={classes.userName} variant=\"h6\">{user.result.name}</Typography>\r\n\t\t\t\t\t<Button variant=\"container\" className={classes.logout}  onClick={logout} color=\"secondary\">LogOut</Button>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t):(\r\n\t\t\t\t<Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\r\n\t\t\t)\r\n\t\t}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n}\r\n"],"mappings":"0IAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACjD,OAAQC,IAAI,CAACC,WAAW,CAACC,WAAW,KAAO,kBAAkB,CAC7D,OAASC,MAAM,CAAEC,MAAM,CAAEC,MAAM,CAAEC,OAAO,CAAEC,UAAU,KAAQ,mBAAmB,CAC/E,MAAOC,UAAS,KAAM,UAAU,CAChC,OAAQC,WAAW,KAAO,aAAa,CACvC,MAAQC,OAAM,KAAM,YAAY,yFAChC,MAAO,IAAMC,OAAM,CAAG,QAATA,OAAM,EAAS,CAC3B,GAAMC,QAAO,CAAGJ,SAAS,EAAE,CAC3B,cAAqBV,QAAQ,CAACe,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,wCAAnEC,IAAI,eAACC,OAAO,eACnB,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAC9B,GAAMW,QAAO,CAAGnB,WAAW,EAAE,CAC7B,GAAMoB,SAAQ,CAAGnB,WAAW,EAAE,CAC9B,GAAMoB,OAAM,CAAE,QAARA,OAAM,EAAM,CACjBH,QAAQ,CAAC,CAACI,IAAI,CAAC,QAAQ,CAAC,CAAC,CACzBH,OAAO,CAAC,OAAO,CAAC,CAChBF,OAAO,CAAC,IAAI,CAAC,CACd,CAAC,CACDnB,SAAS,CAAC,UAAK,CACd,GAAMyB,MAAK,CAAGP,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEO,KAAK,CAEzB,GAAGA,KAAK,CAAC,CAER,GAAMC,aAAY,CAAEf,MAAM,CAACc,KAAK,CAAC,CACjC,GAAGC,YAAY,CAACC,GAAG,CAAE,IAAI,CAAE,GAAIC,KAAI,EAAE,CAACC,OAAO,EAAE,CAAEN,MAAM,EAAE,CAC1D,CAEAJ,OAAO,CAACL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CACrD,CAAC,CAAC,CAACK,QAAQ,CAAC,CAAC,CACb,mBACC,MAAC,MAAM,EAAC,SAAS,CAAET,OAAO,CAACiB,MAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,wBACnE,YAAK,SAAS,CAAEjB,OAAO,CAACkB,cAAe,uBAClC,KAAC,UAAU,EAAC,SAAS,CAAElB,OAAO,CAACmB,OAAQ,CAAE,SAAS,CAAE/B,IAAK,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,wBAE/E,EACZ,cACN,KAAC,OAAO,EAAC,SAAS,CAAEY,OAAO,CAACoB,OAAQ,UAEpCf,IAAI,cACH,aAAK,SAAS,CAAEL,OAAO,CAACqB,OAAQ,wBAC/B,KAAC,MAAM,EAAC,SAAS,CAAErB,OAAO,CAACsB,MAAO,CAAC,GAAG,CAAEjB,IAAI,CAACkB,MAAM,CAACC,IAAK,UAAEnB,IAAI,CAACkB,MAAM,CAACC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,EAAU,cAC/F,KAAC,UAAU,EAAC,SAAS,CAAEzB,OAAO,CAAC0B,QAAS,CAAC,OAAO,CAAC,IAAI,UAAErB,IAAI,CAACkB,MAAM,CAACC,IAAI,EAAc,cACrF,KAAC,MAAM,EAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAExB,OAAO,CAACU,MAAO,CAAE,OAAO,CAAEA,MAAO,CAAC,KAAK,CAAC,WAAW,oBAAgB,GAErG,cAEN,KAAC,MAAM,EAAC,SAAS,CAAEtB,IAAK,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,qBACvE,EAES,GACF,CAEX,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}